#:kivy 2.2.0
#:import Calendar calendar.Calendar

<NaviPalkki@GridLayout>:
    rows: 1
    cols: 5
    Spinner:
        id: month_spinner
        values: app.calendar.list_of_months
        text: app.calendar.list_of_months[app.calendar.cal_month - 1]
        on_text:
            app.calendar.month = app.calendar.list_of_months.index(self.text) + 1


    Spinner:
        id: year_spinner
        values: [str(_) for _ in range(app.calendar.current_year-5, app.calendar.current_year+5)]
        text: str(app.calendar.current_year)
    Button:
        text: "<"
        on_press:
            app.calendar.cal_month -= 1
            self.parent.ids.month_spinner.text = app.calendar.list_of_months[app.calendar.cal_month - 1]

    Button:
        text: ">"
        on_press:
            app.calendar.cal_month += 1
            self.parent.ids.month_spinner.text = app.calendar.list_of_months[app.calendar.cal_month - 1]

    
<CalendarView>:
    # Kalenterin näkymä
    orientation: "vertical"
    year: int(app.calendar.cal_year)
    month: int(app.calendar.cal_month)
    list_of_months: app.calendar.list_of_months
    days: [(_ if _ > 0 else "") for _ in Calendar().itermonthdays(self.year, self.month)] + [""] * 14
    NaviPalkki:
        size_hint_y: None    
        height: 50
    WeekDays:
    Week:
        weekdays: root.days[0:7]
    Week:
        weekdays: root.days[7:14]
    Week:
        weekdays: root.days[14:21]
    Week:
        weekdays: root.days[21:28]
    Week:
        weekdays: root.days[28:35]
    Week:
        weekdays: root.days[35:]
    

<CalendarContainer>:
    # Containeri koko kalenterikikkareelle
    FloatLayout:
        Image:
            source: "images/tausta-lehdet.png"
            fit_mode: "fill"

        GridLayout:
            cols: 1
            rows: 2
            CalendarView:
                size_hint_y: None
                height: root.height * 0.9
            Label:
                id: date
                text: "Today is: " + str(app.calendar.current_date)

<MainWindow>:
    GridLayout:
        cols: 1
        rows: 2
        CalendarContainer:


<Day@Button>:
    background_color_normal: ""
    background_color: (127, 64, 0, 1)
    color: (0, 0, 0, 1)
    entrylist: []

<Week@BoxLayout>:
    datepicker: root.parent
    weekdays: ["","","","","","",""]
    Day:
        text: str(root.weekdays[0])
    Day:
        text: str(root.weekdays[1])
    Day:
        text: str(root.weekdays[2])
    Day:
        text: str(root.weekdays[3])
    Day:
        text: str(root.weekdays[4])
    Day:
        text: str(root.weekdays[5])
    Day:
        text: str(root.weekdays[6])
